# 運用保守仕様

## 監視項目
### システム監視
- SQLiteデータベースのパフォーマンス
- Bunランタイムの状態
- APIのレスポンスタイム
- エラーログ発生頻度

### アプリケーション監視
- ユーザーセッション数（教師/生徒別）
- 練習問題の利用状況
  - アクティブな練習セッション数
  - 問題解答状況
  - 平均解答時間
- エラー発生率
  - 認証エラー
  - 権限エラー
  - 練習セッションエラー

## バックアップ
### データベース
- SQLiteデータベースの完全バックアップ：日次
- 問題データのエクスポート：週次
- ユーザーデータのエクスポート：日次

### ログ・設定
- アプリケーションログ：14日間保持
- 学習履歴データ：永続保持
- システム設定：変更時にバックアップ

## メンテナンス
### 定期メンテナンス
- 実施頻度：月1回
- 時間帯：土曜日 23:00-25:00（学習影響の少ない時間帯）
- 告知要件：
  - 教師：2週間前までに通知
  - 生徒：1週間前までに通知
- 実施内容：
  - データベース最適化
  - 問題データの整合性チェック
  - システムアップデート

### 緊急メンテナンス
- 発生条件：
  - 重大なセキュリティ問題
  - データベース障害
  - 深刻な機能不具合
- 対応手順：
  1. 教師ユーザーへの優先通知
  2. 進行中の練習セッションの保存
  3. システム停止の実施
  4. 修正作業の実行
  5. 動作確認と再開

## インシデント対応
### 優先度定義
- 重大（P1）：
  - システム全体が利用不可
  - 認証システムの障害
- 高（P2）：
  - 練習機能の部分的な障害
  - データ表示の不具合
- 中（P3）：
  - 特定機能の一時的な遅延
  - UI/UXの軽微な問題

### 対応フロー
1. 検知と影響範囲の特定
2. 教師・生徒への影響度判断
3. 必要に応じた一時的な代替手段の提供
4. システム修正の実施
5. 結果報告と再発防止策の策定

## 通知設定
### メール通知
- 通知タイミング
  - 練習アサイン時
  - メンテナンス予定時
  - 緊急メンテナンス時
  - 重要なシステムアップデート時
- 通知テンプレート管理
  - テンプレートの多言語対応
  - HTMLメール形式サポート
